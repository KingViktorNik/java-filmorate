CREATE TABLE IF NOT EXISTS MPA( -- Рейтинг фильмов
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME VARCHAR(50)
    );

CREATE TABLE IF NOT EXISTS GENRE( -- Жанры фильмов
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME VARCHAR(50)
);

CREATE TABLE IF NOT EXISTS USERS( -- Данные пользователей
    ID INTEGER GENERATED BY DEFAULT  AS IDENTITY PRIMARY KEY,
    EMAIL VARCHAR(50) NOT NULL,
    LOGIN VARCHAR(50) NOT NULL,
    NAME VARCHAR(50),
    BIRTHDAY DATE
);

CREATE TABLE IF NOT EXISTS FILMS( -- Данные о фильмах
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME VARCHAR(50) NOT NULL,
    RELEASE_DATE DATE, -- Дата релиза
    DESCRIPTION VARCHAR(200),
    DURATION INTEGER, -- Продолжительность фильма(в минутах)
    RATE INTEGER,
    MPA_ID INTEGER REFERENCES MPA (ID) -- связь с базой MPA
);

CREATE TABLE IF NOT EXISTS FRIENDS(
    ID_USER INTEGER,
    ID_FRIEND INTEGER,
    CONSTRAINT FRIENDS_PK UNIQUE (ID_USER, ID_FRIEND)
);

CREATE TABLE IF NOT EXISTS LIKE_FILMS(
    ID_FILM INTEGER,
    ID_USER INTEGER,
    CONSTRAINT LIKE_PK UNIQUE (ID_FILM, ID_USER)
);

CREATE TABLE IF NOT EXISTS FILM_GENRE(
    ID_FILM INTEGER,
    ID_GENRE INTEGER,
    CONSTRAINT GENRE_PK UNIQUE (ID_FILM, ID_GENRE)
);